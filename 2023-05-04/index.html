<!DOCTYPE html>
<html lang="en">

<head>
    <title>CMSIS-DAP互換機制作 | とっとのメモ帳</title>
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <meta name="robots" content="noodp"/>

    <link rel="stylesheet" href="https://totto8492.github.io/style.css">
    <link rel="stylesheet" href="https://totto8492.github.io/color/blue.css">

        <link rel="stylesheet" href="https://totto8492.github.io/color/background_dark.css">
    
    <link rel="stylesheet" href="https://totto8492.github.io/font-hack-subset.css">

    <meta name="description" content="">

    <meta property="og:description" content="">
    <meta property="og:title" content="CMSIS-DAP互換機制作 | とっとのメモ帳">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://totto8492.github.io/2023-05-04/">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:description" content="">
    <meta name="twitter:title" content="CMSIS-DAP互換機制作 | とっとのメモ帳">
    <meta property="twitter:domain" content="totto8492.github.io">
    <meta property="twitter:url" content="https://totto8492.github.io/2023-05-04/">

        <link rel="shortcut icon" type="image/png" href="/favicon.png">
    

<meta property="og:site_name" content="とっとのメモ帳"><meta property="og:type" content="article">
<meta property="og:title" content="CMSIS-DAP互換機制作"><meta property="og:url" content="https://totto8492.github.io/2023-05-04/"><meta property="og:image" content="https://totto8492.github.io/favicon.png">

</head>

<body class="">
<div class="container">
    
    <header class="header">
        <div class="header__inner">
            <div class="header__logo">
                    
                <a href="https://totto8492.github.io" style="text-decoration: none;">
                    <div class="logo">
                      
                            とっとのメモ帳
                        
                    </div>
                </a>
            </div>
        </div>

        
        
                <nav class="menu">
            <ul class="menu__inner">
                <li class="active"><a href="https://totto8492.github.io">blog</a></li>
            
                <li><a href="https://totto8492.github.io/tags">tags</a></li>
            
                <li><a href="https://totto8492.github.io/archive">archive</a></li>
            
                <li><a href="https://totto8492.github.io/about">about me</a></li>
            </ul>
        </nav>
    
    
        
    </header>
    

    <div class="content">
        
    <div class="post">
        
    <h1 class="post-title"><a href="https://totto8492.github.io/2023-05-04/">CMSIS-DAP互換機制作</a></h1>
    <div class="post-meta-inline">
        
    <span class="post-date">
            2023-05-04
        </span>

    </div>

    
        <span class="post-tags-inline">
                :: tags:&nbsp;
                <a class="post-tag" href="https://totto8492.github.io/tags/electrical/">#electrical</a></span>
    

        <div class="post-content">
            <p>以前作ったシリアル変換器を利用したデバッグプローブが時折不機嫌になるので、新しく作り直してみました。</p>
<span id="continue-reading"></span>
<hr />
<p>どういう構成にしたものか〜と適当に調べた結果、今回は<a href="https://github.com/devanlai/dap42">DAP42</a>というファームウェアを使うことにしました。STM32のF042シリーズやF103シリーズ向けのCMSIS-DAP互換のOSSファームウェアです。これを手元にあったSTM32マイコンSTM32F042K6T6に書き込んで使います。</p>
<p>回路等は以前秋月で購入した色物基板AE-C-DIGITALに実装しました。なかなか変わったパターンが実装済みの基板です。手元の普通のユニバーサルC基板が少なくなってきたので、その代わりに使うことにしました。</p>







<figure class="center">
    <a href="https://totto8492.github.io/processed_images/2023-05-04_00-21-13.0d5e6ebf4a2d7ce0.jpg">
        <img src="https://totto8492.github.io/processed_images/2023-05-04_00-21-13.f5a08c2cf73b1e4f.webp"   />
    </a>
    
</figure>
<p>こんな感じになりました。
とりあえず次のような用途のピンヘッダを生やしてあります。</p>
<ul>
<li>3.3V</li>
<li>5V</li>
<li>UART</li>
<li>SWD</li>
</ul>
<p>DAP42のおかげでCMSIS-DAP互換のデバッグ機能を持ったMCUであればとりあえず繋げることはできます。STM32もラズピコもコレ一本！って感じです。</p>
<p>動作はおおむね良好で、通信エラーの類は今の所発生してなさそうです（スリープビットの指定ミスによる通信途絶を除く）。</p>
<p>しいて言えば、USB 1.1による接続ですのでI/Oがちょっと遅いかな〜と感じました。大きめのバイナリを書き込むときなどに気になるときはあります。これについてはビルドオプションをサイズ削減優先を指定しておき、ねちっこいトラブルが起きたときにだけフルのデバッグビルドを書き込む運用をしています。</p>







<figure class="center">
    <a href="https://totto8492.github.io/processed_images/2023-05-04_00-24-22.1e94c6f7a52da908.jpg">
        <img src="https://totto8492.github.io/processed_images/2023-05-04_00-24-22.bfe5c808e9a198ef.webp"   />
    </a>
    
</figure>
<p>微妙に解体できます。</p>

        </div>

        
            <div class="pagination">
                <div class="pagination__title">
                    <span class="pagination__title-h">Thanks for reading! Read other posts?</span>
                    <hr />
                </div>
                <div class="pagination__buttons">
                        <span class="button previous">
                            <a href="https://totto8492.github.io/2023-04-24/">
                                <span class="button__icon">←</span>&nbsp;
                                <span class="button__text">Pico Wも買ってみました</span>
                            </a>
                        </span>
                    
                    
                        <span class="button next">
                            <a href="https://totto8492.github.io/2023-05-27/">
                                <span class="button__text">ねこからの贈り物</span>&nbsp;
                                <span class="button__icon">→</span>
                            </a>
                        </span>
                    </div>
            </div>
        
    </div>

    </div>

    
    <footer class="footer">
        <div class="footer__inner">
                <div class="copyright">
                        <span>© 
    2025
 Totto8492</span>
                    <span class="copyright-theme">
                        <span class="copyright-theme-sep">:: </span>
                        Theme: <a href="https://github.com/pawroman/zola-theme-terminimal/">Terminimal</a> by pawroman
                    </span>
                </div>
            </div>
    </footer>
    

</div>
</body>

</html>
